{"ast":null,"code":"import React from\"react\";import{useState}from\"react\";import axios from\"axios\";import{ImBold,ImItalic,ImUnderline,ImImage,ImQuotesLeft}from\"react-icons/im\";import{SyncLoader}from\"react-spinners\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const Editor=_ref=>{let{onUrlChange,commentRef}=_ref;const[spinner,setSpinner]=useState(false);function uploadImage(event){const fileToUpload=event.target.files[0];setSpinner(true);var formData=new FormData();formData.append(\"file\",fileToUpload);formData.append(\"api_key\",\"316255361857537\");formData.append(\"upload_preset\",\"i74l2yd4\");axios.post(\"https://api.cloudinary.com/v1_1/ddmtjxz7e/image/upload\",formData,{headers:{\"Content-Type\":\"multipart/form-data\"}}).then(res=>{const imageUrl=res.data.secure_url;onUrlChange(prev=>[...prev,imageUrl]);commentRef.current.innerText+=imageUrl;setSpinner(false);});}function textActions(textStyle){let styleTag=document.createElement(textStyle);if(window.getSelection){var rangeSelection=window.getSelection();if(rangeSelection.rangeCount){var range=rangeSelection.getRangeAt(0).cloneRange();range.surroundContents(styleTag);rangeSelection.removeAllRanges();rangeSelection.addRange(range);}}}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"styling-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"bold\",onClick:()=>textActions(\"b\"),children:/*#__PURE__*/_jsx(ImBold,{})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"italic\",onClick:()=>textActions(\"i\"),children:/*#__PURE__*/_jsx(ImItalic,{})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"underline\",onClick:()=>textActions(\"u\"),children:/*#__PURE__*/_jsx(ImUnderline,{})}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:\"comment-image\",accept:\"image/*\",onInput:uploadImage,\"data-testid\":\"image-upload\",id:\"image\",style:{display:\"none\"}}),spinner&&/*#__PURE__*/_jsx(\"p\",{className:\"image-loader\",children:/*#__PURE__*/_jsx(SyncLoader,{color:\"#36d7b7\"})}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"image\",children:/*#__PURE__*/_jsx(ImImage,{})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"code\",onClick:()=>textActions(\"blockquote\"),children:/*#__PURE__*/_jsx(ImQuotesLeft,{})})]})});};export default Editor;","map":{"version":3,"names":["React","useState","axios","ImBold","ImItalic","ImUnderline","ImImage","ImQuotesLeft","SyncLoader","Editor","onUrlChange","commentRef","spinner","setSpinner","uploadImage","event","fileToUpload","target","files","formData","FormData","append","post","headers","then","res","imageUrl","data","secure_url","prev","current","innerText","textActions","textStyle","styleTag","document","createElement","window","getSelection","rangeSelection","rangeCount","range","getRangeAt","cloneRange","surroundContents","removeAllRanges","addRange","display"],"sources":["/home/vishal/projects/fullstack/frontend/src/components/Discussion/editor.jsx"],"sourcesContent":["import React from \"react\";\nimport { useState } from \"react\";\nimport axios from \"axios\";\nimport {\n  ImBold,\n  ImItalic,\n  ImUnderline,\n  ImImage,\n  ImQuotesLeft,\n} from \"react-icons/im\";\nimport { SyncLoader } from \"react-spinners\";\n\nconst Editor = ({ onUrlChange, commentRef }) => {\n  const [spinner, setSpinner] = useState(false);\n\n  function uploadImage(event) {\n    const fileToUpload = event.target.files[0];\n    setSpinner(true);\n\n    var formData = new FormData();\n    formData.append(\"file\", fileToUpload);\n    formData.append(\"api_key\", \"316255361857537\");\n    formData.append(\"upload_preset\", \"i74l2yd4\");\n\n    axios\n      .post(\n        \"https://api.cloudinary.com/v1_1/ddmtjxz7e/image/upload\",\n        formData,\n        {\n          headers: {\n            \"Content-Type\": \"multipart/form-data\",\n          },\n        }\n      )\n      .then((res) => {\n        const imageUrl = res.data.secure_url;\n        onUrlChange((prev) => [...prev, imageUrl]);\n        commentRef.current.innerText += imageUrl;\n        setSpinner(false);\n      });\n  }\n\n  function textActions(textStyle) {\n    let styleTag = document.createElement(textStyle);\n    if (window.getSelection) {\n      var rangeSelection = window.getSelection();\n      if (rangeSelection.rangeCount) {\n        var range = rangeSelection.getRangeAt(0).cloneRange();\n        range.surroundContents(styleTag);\n        rangeSelection.removeAllRanges();\n        rangeSelection.addRange(range);\n      }\n    }\n  }\n\n  return (\n    <>\n      <div className=\"styling-buttons\">\n        <button type=\"button\" className=\"bold\" onClick={() => textActions(\"b\")}>\n          <ImBold />\n        </button>\n        <button\n          type=\"button\"\n          className=\"italic\"\n          onClick={() => textActions(\"i\")}\n        >\n          <ImItalic />\n        </button>\n        <button\n          type=\"button\"\n          className=\"underline\"\n          onClick={() => textActions(\"u\")}\n        >\n          <ImUnderline />\n        </button>\n\n        <input\n          type=\"file\"\n          className=\"comment-image\"\n          accept=\"image/*\"\n          onInput={uploadImage}\n          data-testid=\"image-upload\"\n          id=\"image\"\n          style={{ display: \"none\" }}\n        />\n        {spinner && (\n          <p className=\"image-loader\">\n            <SyncLoader color=\"#36d7b7\" />\n          </p>\n        )}\n        <label htmlFor=\"image\">\n          <ImImage />\n        </label>\n        <button\n          type=\"button\"\n          className=\"code\"\n          onClick={() => textActions(\"blockquote\")}\n        >\n          <ImQuotesLeft />\n        </button>\n      </div>\n    </>\n  );\n};\n\nexport default Editor;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}