{"ast":null,"code":"import{useState}from\"react\";import{AiFillDelete}from\"react-icons/ai\";import parse from\"html-react-parser\";import Reply from\"./reply\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var imageUrlRegex=/\\b(https?:\\/\\/[^\\s]+)/g;const CommentCard=_ref=>{var _value$content;let{value,deleteComment}=_ref;const{_id,name,rating,content}=value;const[isOpen,setIsOpen]=useState(false);const[reply,setReply]=useState([]);const[toggle,setToggle]=useState(true);const[replyBox,setReplyBox]=useState(false);function addReply(name,comment){setReply(prevReply=>[...prevReply,{name,comment}]);setIsOpen(!isOpen);}const deleteReply=index=>{let deleteList=[...reply];deleteList.splice(index,1);setReply(deleteList);};const imageUrl=value===null||value===void 0?void 0:(_value$content=value.content)===null||_value$content===void 0?void 0:_value$content.match(imageUrlRegex);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"comment-boxes\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"review\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"top-area\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comment-left\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"name\",\"data-testid\":\"names\",children:name}),/*#__PURE__*/_jsxs(\"div\",{className:\"rating\",\"data-testid\":\"ratings\",children:[rating,\"\\u2B50\\uFE0F\"]})]},_id),/*#__PURE__*/_jsx(\"div\",{className:\"add-icon\",\"data-testid\":\"toggle-btn\",onClick:()=>setToggle(!toggle),children:toggle?\"-\":\"+\"})]}),toggle&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"comment\",\"data-testid\":\"comments\",children:parse(content===null||content===void 0?void 0:content.replace(imageUrlRegex,\"\"))}),imageUrl&&/*#__PURE__*/_jsx(\"img\",{src:imageUrl,\"data-testid\":\"image-preview\",className:\"\".concat(imageUrl?\"image-text-editor\":\"\"),style:{width:\"150px\"}}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttons\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"reply\",onClick:()=>setIsOpen(!isOpen),children:/*#__PURE__*/_jsx(\"div\",{className:\"reply-btn\",children:\"Reply\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"reply-count\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"view-reply\",onClick:()=>setReplyBox(!replyBox),children:[replyBox?\"Hide Reply\":\"Show Reply\",\" (\",reply.length,\")\"]})}),/*#__PURE__*/_jsx(\"button\",{role:\"delete\",className:\"delete\",onClick:deleteComment,children:/*#__PURE__*/_jsx(AiFillDelete,{})})]})]})]})}),isOpen&&/*#__PURE__*/_jsx(Reply,{onAdd:addReply}),reply===null||reply===void 0?void 0:reply.map(_ref2=>{let{id,name,comment}=_ref2;return/*#__PURE__*/_jsx(_Fragment,{children:replyBox&&/*#__PURE__*/_jsx(\"div\",{className:\"reply-section\",children:/*#__PURE__*/_jsx(\"div\",{className:\"comment-boxes\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"review\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"top-area\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"name\",children:[\" \",name]})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"comment\",children:parse(\"\".concat(comment))}),/*#__PURE__*/_jsx(\"div\",{className:\"buttons\",children:/*#__PURE__*/_jsx(\"button\",{className:\"delete\",onClick:deleteReply,children:/*#__PURE__*/_jsx(AiFillDelete,{})})})]})]})},id)})});})]});};export default CommentCard;","map":{"version":3,"names":["useState","AiFillDelete","parse","Reply","imageUrlRegex","CommentCard","value","deleteComment","_id","name","rating","content","isOpen","setIsOpen","reply","setReply","toggle","setToggle","replyBox","setReplyBox","addReply","comment","prevReply","deleteReply","index","deleteList","splice","imageUrl","match","replace","width","length","map","id"],"sources":["/home/vishal/projects/fullstack/frontend/src/components/Discussion/commentCard.jsx"],"sourcesContent":["import { useState } from \"react\";\nimport { AiFillDelete } from \"react-icons/ai\";\nimport parse from \"html-react-parser\";\nimport Reply from \"./reply\";\n\nvar imageUrlRegex = /\\b(https?:\\/\\/[^\\s]+)/g;\n\nconst CommentCard = ({ value, deleteComment }) => {\n  const { _id, name, rating, content } = value;\n  const [isOpen, setIsOpen] = useState(false);\n  const [reply, setReply] = useState([]);\n  const [toggle, setToggle] = useState(true);\n  const [replyBox, setReplyBox] = useState(false);\n\n  function addReply(name, comment) {\n    setReply((prevReply) => [...prevReply, { name, comment }]);\n    setIsOpen(!isOpen);\n  }\n  const deleteReply = (index) => {\n    let deleteList = [...reply];\n    deleteList.splice(index, 1);\n    setReply(deleteList);\n  };\n\n  const imageUrl = value?.content?.match(imageUrlRegex);\n  return (\n    <>\n      <div className=\"comment-boxes\">\n        <div className=\"review\">\n          <div className=\"top-area\">\n            <div className=\"comment-left\" key={_id}>\n              <div className=\"name\" data-testid=\"names\">\n                {name}\n              </div>\n              <div className=\"rating\" data-testid=\"ratings\">\n                {rating}⭐️\n              </div>\n            </div>\n            <div\n              className=\"add-icon\"\n              data-testid=\"toggle-btn\"\n              onClick={() => setToggle(!toggle)}\n            >\n              {toggle ? \"-\" : \"+\"}\n            </div>\n          </div>\n          {toggle && (\n            <div>\n              <div className=\"comment\" data-testid=\"comments\">\n                {parse(content?.replace(imageUrlRegex, \"\"))}\n              </div>\n              {imageUrl && (\n                <img\n                  src={imageUrl}\n                  data-testid=\"image-preview\"\n                  className={`${imageUrl ? \"image-text-editor\" : \"\"}`}\n                  style={{ width: \"150px\" }}\n                />\n              )}\n\n              <div className=\"buttons\">\n                <button\n                  type=\"button\"\n                  className=\"reply\"\n                  onClick={() => setIsOpen(!isOpen)}\n                >\n                  <div className=\"reply-btn\">Reply</div>\n                </button>\n                <button className=\"reply-count\">\n                  <div\n                    className=\"view-reply\"\n                    onClick={() => setReplyBox(!replyBox)}\n                  >\n                    {replyBox ? \"Hide Reply\" : \"Show Reply\"} ({reply.length})\n                  </div>\n                </button>\n                <button\n                  role=\"delete\"\n                  className=\"delete\"\n                  onClick={deleteComment}\n                >\n                  <AiFillDelete />\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n      {isOpen && <Reply onAdd={addReply} />}\n      {reply?.map(({ id, name, comment }) => {\n        return (\n          <>\n            {replyBox && (\n              <div className=\"reply-section\">\n                <div className=\"comment-boxes\" key={id}>\n                  <div className=\"review\">\n                    <div className=\"top-area\">\n                      <div className=\"name\"> {name}</div>\n                    </div>\n                    <div>\n                      <div className=\"comment\">{parse(`${comment}`)}</div>\n                      <div className=\"buttons\">\n                        <button className=\"delete\" onClick={deleteReply}>\n                          <AiFillDelete />\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n          </>\n        );\n      })}\n    </>\n  );\n};\n\nexport default CommentCard;\n"],"mappings":"AAAA,OAASA,QAAQ,KAAQ,OAAO,CAChC,OAASC,YAAY,KAAQ,gBAAgB,CAC7C,MAAOC,MAAK,KAAM,mBAAmB,CACrC,MAAOC,MAAK,KAAM,SAAS,CAAC,6IAE5B,GAAIC,cAAa,CAAG,wBAAwB,CAE5C,KAAMC,YAAW,CAAG,MAA8B,uBAA7B,CAAEC,KAAK,CAAEC,aAAc,CAAC,MAC3C,KAAM,CAAEC,GAAG,CAAEC,IAAI,CAAEC,MAAM,CAAEC,OAAQ,CAAC,CAAGL,KAAK,CAC5C,KAAM,CAACM,MAAM,CAAEC,SAAS,CAAC,CAAGb,QAAQ,CAAC,KAAK,CAAC,CAC3C,KAAM,CAACc,KAAK,CAAEC,QAAQ,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACgB,MAAM,CAAEC,SAAS,CAAC,CAAGjB,QAAQ,CAAC,IAAI,CAAC,CAC1C,KAAM,CAACkB,QAAQ,CAAEC,WAAW,CAAC,CAAGnB,QAAQ,CAAC,KAAK,CAAC,CAE/C,QAASoB,SAAQ,CAACX,IAAI,CAAEY,OAAO,CAAE,CAC/BN,QAAQ,CAAEO,SAAS,EAAK,CAAC,GAAGA,SAAS,CAAE,CAAEb,IAAI,CAAEY,OAAQ,CAAC,CAAC,CAAC,CAC1DR,SAAS,CAAC,CAACD,MAAM,CAAC,CACpB,CACA,KAAMW,YAAW,CAAIC,KAAK,EAAK,CAC7B,GAAIC,WAAU,CAAG,CAAC,GAAGX,KAAK,CAAC,CAC3BW,UAAU,CAACC,MAAM,CAACF,KAAK,CAAE,CAAC,CAAC,CAC3BT,QAAQ,CAACU,UAAU,CAAC,CACtB,CAAC,CAED,KAAME,SAAQ,CAAGrB,KAAK,SAALA,KAAK,iCAALA,KAAK,CAAEK,OAAO,yCAAd,eAAgBiB,KAAK,CAACxB,aAAa,CAAC,CACrD,mBACE,wCACE,YAAK,SAAS,CAAC,eAAe,uBAC5B,aAAK,SAAS,CAAC,QAAQ,wBACrB,aAAK,SAAS,CAAC,UAAU,wBACvB,aAAK,SAAS,CAAC,cAAc,wBAC3B,YAAK,SAAS,CAAC,MAAM,CAAC,cAAY,OAAO,UACtCK,IAAI,EACD,cACN,aAAK,SAAS,CAAC,QAAQ,CAAC,cAAY,SAAS,WAC1CC,MAAM,CAAC,cACV,GAAM,GAN2BF,GAAG,CAOhC,cACN,YACE,SAAS,CAAC,UAAU,CACpB,cAAY,YAAY,CACxB,OAAO,CAAE,IAAMS,SAAS,CAAC,CAACD,MAAM,CAAE,UAEjCA,MAAM,CAAG,GAAG,CAAG,GAAG,EACf,GACF,CACLA,MAAM,eACL,oCACE,YAAK,SAAS,CAAC,SAAS,CAAC,cAAY,UAAU,UAC5Cd,KAAK,CAACS,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEkB,OAAO,CAACzB,aAAa,CAAE,EAAE,CAAC,CAAC,EACvC,CACLuB,QAAQ,eACP,YACE,GAAG,CAAEA,QAAS,CACd,cAAY,eAAe,CAC3B,SAAS,WAAKA,QAAQ,CAAG,mBAAmB,CAAG,EAAE,CAAG,CACpD,KAAK,CAAE,CAAEG,KAAK,CAAE,OAAQ,CAAE,EAE7B,cAED,aAAK,SAAS,CAAC,SAAS,wBACtB,eACE,IAAI,CAAC,QAAQ,CACb,SAAS,CAAC,OAAO,CACjB,OAAO,CAAE,IAAMjB,SAAS,CAAC,CAACD,MAAM,CAAE,uBAElC,YAAK,SAAS,CAAC,WAAW,UAAC,OAAK,EAAM,EAC/B,cACT,eAAQ,SAAS,CAAC,aAAa,uBAC7B,aACE,SAAS,CAAC,YAAY,CACtB,OAAO,CAAE,IAAMO,WAAW,CAAC,CAACD,QAAQ,CAAE,WAErCA,QAAQ,CAAG,YAAY,CAAG,YAAY,CAAC,IAAE,CAACJ,KAAK,CAACiB,MAAM,CAAC,GAC1D,GAAM,EACC,cACT,eACE,IAAI,CAAC,QAAQ,CACb,SAAS,CAAC,QAAQ,CAClB,OAAO,CAAExB,aAAc,uBAEvB,KAAC,YAAY,IAAG,EACT,GACL,GAET,GACG,EACF,CACLK,MAAM,eAAI,KAAC,KAAK,EAAC,KAAK,CAAEQ,QAAS,EAAG,CACpCN,KAAK,SAALA,KAAK,iBAALA,KAAK,CAAEkB,GAAG,CAAC,OAA2B,IAA1B,CAAEC,EAAE,CAAExB,IAAI,CAAEY,OAAQ,CAAC,OAChC,mBACE,yBACGH,QAAQ,eACP,YAAK,SAAS,CAAC,eAAe,uBAC5B,YAAK,SAAS,CAAC,eAAe,uBAC5B,aAAK,SAAS,CAAC,QAAQ,wBACrB,YAAK,SAAS,CAAC,UAAU,uBACvB,aAAK,SAAS,CAAC,MAAM,WAAC,GAAC,CAACT,IAAI,GAAO,EAC/B,cACN,oCACE,YAAK,SAAS,CAAC,SAAS,UAAEP,KAAK,WAAImB,OAAO,EAAG,EAAO,cACpD,YAAK,SAAS,CAAC,SAAS,uBACtB,eAAQ,SAAS,CAAC,QAAQ,CAAC,OAAO,CAAEE,WAAY,uBAC9C,KAAC,YAAY,IAAG,EACT,EACL,GACF,GACF,EAb4BU,EAAE,CAchC,EAET,EACA,CAEP,CAAC,CAAC,GACD,CAEP,CAAC,CAED,cAAe5B,YAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}